# 5: Input handling and Physics

In  today's lab, we would implement the shadow clone effect in the original story. Please reuse the project from last lab.

![](https://github.com/hkbu-kennycheng/uelabs/blob/master/lab4/lab4.png?raw=true)

# Shadow Clone Technique

![](https://staticr1.blastingcdn.com/media/photogallery/2016/3/6/660x290/b_620x273/kage-bunshin-no-jutsu-de-naruto_632927.jpg)

Today, I'm going to show you the Shadow Clone Technique. The shadow clone technique isn't a skill in computer graphics, instead it is a symbolic jutsu (忍術) in the Naruto manga series.

## Handling Inputs

### Action mappings

Let's click on  top menu bar, select **`Edit -> Project Settings...`** to open up the following dialog. Please search for **`Input`** on the left panel and click on it.

![](https://github.com/hkbu-kennycheng/uelabs/blob/master/lab4/Project Settings 10_8_2020 9_39_30 am.png?raw=true)

In **Binding** section, click on **`+`** button besides **`Action Mappings`**. Please name it as **`Fire`** and select **`F`** key from the pull down menu.

### Adding event node in Event Graph

![](https://github.com/hkbu-kennycheng/uelabs/blob/master/lab4/ThirdPersonCharacter%2010_8_2020%209_51_36%20am.png?raw=true)


Here are the steps for above graph.

1. Right-click on blank area, search for **Fire** and select it.
2. Drag from **Pressed** pin of **InputAction Fire** to somewhere, search for **Add Skeleton Mesh Component** and select it
3. Drag from right **execution** pin of **Add Skeleton Mesh Component** node to somewhere, search for **Set Skeleton Mesh** and select it
4. In the **New Mesh** pin of **Set Skeleton Mesh** node, please select the naruto skeleton from the pull down menu
5. Connect **Target**  pin of **Set Skeleton Mesh** node to **Return value** pin of **Add Skeleton Mesh Component**
6. Drag from right **execution** pin of **Set Skeleton Mesh** node to somewhere, search for **AddRelativeRotation** and select it.
7. Connect the **Target** pin of **AddRelativeRotation** to **Return Value** pin of **Add Skeleton Mesh Component**
8. Drag from **Delta Rotation** pin of **AddRelativeRotation**, search for **Get Relative Rotation** and select it.
9. Drag from **Target** pin of **Get Relative Rotation** to somewhere, search for **Get mesh** and select it.
10. Drag from right **execution** pin of **Get Relative Rotation** to somewhere, search for **Set Anim Instance Class** and select it
11. In **New Class** pin of **Set Anim Instance Class**, please select the **Animation Blueprint** that we have **created earlier in this lab**
12. Connect **Target** pin of **Set Anim Instance Class** to **Return Value** pin of **Add Skeleton Mesh Component**
13. Drag from right **execution** pin of **Set Anim Instance Class** to somewhere, search for **AddLocalOffset** and select it
14. Connect the **Target** pin of **AddLocalOffset** to **Return Value** of **Add Skeleton Mesh Component**

### Execrise 2

Complete the graph connecting to **Delta Location** pin of **AddLocalOffset**, it just similar to the graph we have done in first lab.

# Collision

## Setup a trap to make shadow disappear

We would like to make all shadow clones disappear when Naruto walked into an area / trap. To implement this behavior, we need to give the clones an identity and use Collision detection to hide all those clones.

### Adding tag to the Shadow Skeletal mesh components

In order to identify the shadow clone generated by blueprint, we give each clone a tag.

![](https://github.com/hkbu-kennycheng/uelabs/blob/master/lab5/add-tag.png?raw=true)

Here are the steps for adding above nodes.

1. Drag from right **execution** pin of **Add Skeletal Mesh Components** node to some where, search for **set component tags** and select it
2. Drag from **Component Tags** pin of the newly created **Set** node to somewhere, search for **make array** and select it.
3. Please input **shadow** in the **[0]** pin of **Make array** node
4. Connect **Return Value** of **Add skeletal Mesh Component** to **Target** of the **Set** node
5. Connect **execution** of Set node to **Set Skeletal Mesh**

### Setup a new blueprint for the trap

Please add a new Blueprint class by click on **Add New** button in **Content Browser**, select **Actor** and name it as **Trap**.

### Making the shadow invisible when **ActorBeginOverlap**

Please navigate to the Event Graph of Trap.

![](https://github.com/hkbu-kennycheng/uelabs/blob/master/lab5/make-shadow-invisible.png?raw=true)

Here are the steps for creating above graph.

1. Drag from **Other Actor** of **Event ActorBeginOverlap** to somewhere, search for **Cast to Third Person Character** and select it.
2. Connect the execution from  **Event ActorBeginOverlap** to **Cast to Third Person Character**  node
3. Drag from **As Third Person Character** pin of **Cast to Third Person Character**  node to somewhere, search for **Get Components by Tag** and select it.
4. Select **Skeletal Mesh Component** in **Component Class** of **Get Components by Tag**
5. Drag from **Return Value** of **Get Components by Tag** node to somewhere, search for **For Each Loop** and select it.
6. Connect **execution** from **Cast to Third Person Character** to  **For Each Loop**.
7. Drag from **Array Element** of **For Each Loop** node to somewhere, search for **Set Visibility** and select it.
8. Connect **Loop Body** of  **For Each Loop** to **execution** of **Set Visibility** node

# Physics

![](https://github.com/hkbu-kennycheng/uelabs/blob/master/lab5/physics-properties.png?raw=true)

- Mass
- Enable Gravity



